module enemy_matrix(
    input clk,
    input [15:0]enemy_matrix1 , 
	 input [15:0]enemy_matrix2 , 
	 input [15:0]enemy_matrix3 , 
	 input [15:0]enemy_matrix4 , 
	 input [15:0]enemy_matrix5 , 
	 input [15:0]enemy_matrix6 , 
	 input[15:0] enemy_matrix7 , 
	 input[15:0] enemy_matrix8 , 
    input [9:0] next_x,
    input [9:0] next_y,
    output reg [7:0] color
);
reg [15:0] enemy_matrix [7:0];
wire [9:0] x;
wire [9:0] y;
    reg [2:0] type;
    reg alive_dead;
    reg [4:0] location_;
    reg [3:0] angle;
    reg [2:0] health;
    reg [7:0] enemy_color;
	     integer i;

always @(posedge clk) begin
	 enemy_matrix[7] = enemy_matrix1;
	 enemy_matrix[6] = enemy_matrix2;
	 enemy_matrix[5] = enemy_matrix3;
	 enemy_matrix[4] = enemy_matrix4;
	 enemy_matrix[3] = enemy_matrix5;
	 enemy_matrix[2] = enemy_matrix6;
	 enemy_matrix[1] = enemy_matrix7;
	 enemy_matrix[0] = enemy_matrix8;
	 


    color = 8'b00000000; // Default color value

    for (i = 0; i < 8; i = i + 1) begin
		  color = 8'b00000000;
        type = enemy_matrix[i][2:0];
        alive_dead = enemy_matrix[i][3];
        location_ = enemy_matrix[i][8:4];
        angle = enemy_matrix[i][12:9];
        health = enemy_matrix[i][15:13];

        if (alive_dead) begin
            if (health == 5) begin
                enemy_color = 8'b11111111;
            end else if (health == 4) begin
                enemy_color = 8'b00000011;
            end else if (health == 3) begin
                enemy_color = 8'b00011100;
            end else if (health == 2) begin
                enemy_color = 8'b11100011;
            end else if (health == 1) begin
                enemy_color = 8'b11100000;
            end


            if (type == 3'b100) begin
                if (((x) > (next_x - 10)) && ((x) < (next_x + 10)) && ((y) > (next_y - 5)) && ((y) < (next_y + 5))) begin
                    color = enemy_color;
                end 
            end 
				else if (type == 3'b010) begin
                if (((x) > (next_x - 5)) && ((x) < (next_x + 5)) && ((y) > (next_y - 10)) && ((y) < (next_y + 10))) begin
                    color = enemy_color;
                end 
            end 
				else if (type == 3'b001) begin
                if (((x) > (next_x - 5)) && ((x) < (next_x + 5)) && ((y) > (next_y - 10)) && ((y) < (next_y + 10))) begin
                    color = enemy_color;
                end 
                if (((x) > (next_x - 10)) && ((x) < (next_x + 10)) && ((y) > (next_y - 5)) && ((y) < (next_y + 5))) begin
                    color = enemy_color;
                end 
            end
        end
    end
end
location u1(angle,location_,x,y);
endmodule